{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { populateInstance } from '../../useTreeView/useTreeView.utils';\nexport const useTreeViewExpansion = ({\n  instance,\n  params,\n  models\n}) => {\n  const setExpandedItems = (event, value) => {\n    params.onExpandedItemsChange?.(event, value);\n    models.expandedItems.setControlledValue(value);\n  };\n  const isNodeExpanded = React.useCallback(itemId => {\n    return Array.isArray(models.expandedItems.value) ? models.expandedItems.value.indexOf(itemId) !== -1 : false;\n  }, [models.expandedItems.value]);\n  const isNodeExpandable = React.useCallback(itemId => !!instance.getNode(itemId)?.expandable, [instance]);\n  const toggleNodeExpansion = useEventCallback((event, itemId) => {\n    if (itemId == null) {\n      return;\n    }\n    const isExpandedBefore = models.expandedItems.value.indexOf(itemId) !== -1;\n    let newExpanded;\n    if (isExpandedBefore) {\n      newExpanded = models.expandedItems.value.filter(id => id !== itemId);\n    } else {\n      newExpanded = [itemId].concat(models.expandedItems.value);\n    }\n    if (params.onItemExpansionToggle) {\n      params.onItemExpansionToggle(event, itemId, !isExpandedBefore);\n    }\n    setExpandedItems(event, newExpanded);\n  });\n  const expandAllSiblings = (event, itemId) => {\n    const node = instance.getNode(itemId);\n    const siblings = instance.getChildrenIds(node.parentId);\n    const diff = siblings.filter(child => instance.isNodeExpandable(child) && !instance.isNodeExpanded(child));\n    const newExpanded = models.expandedItems.value.concat(diff);\n    if (diff.length > 0) {\n      if (params.onItemExpansionToggle) {\n        diff.forEach(newlyExpandedItemId => {\n          params.onItemExpansionToggle(event, newlyExpandedItemId, true);\n        });\n      }\n      setExpandedItems(event, newExpanded);\n    }\n  };\n  populateInstance(instance, {\n    isNodeExpanded,\n    isNodeExpandable,\n    toggleNodeExpansion,\n    expandAllSiblings\n  });\n};\nuseTreeViewExpansion.models = {\n  expandedItems: {\n    getDefaultValue: params => params.defaultExpandedItems\n  }\n};\nconst DEFAULT_EXPANDED_NODES = [];\nuseTreeViewExpansion.getDefaultizedParams = params => _extends({}, params, {\n  defaultExpandedItems: params.defaultExpandedItems ?? DEFAULT_EXPANDED_NODES\n});\nuseTreeViewExpansion.params = {\n  expandedItems: true,\n  defaultExpandedItems: true,\n  onExpandedItemsChange: true,\n  onItemExpansionToggle: true\n};","map":{"version":3,"names":["_extends","React","useEventCallback","populateInstance","useTreeViewExpansion","instance","params","models","setExpandedItems","event","value","onExpandedItemsChange","expandedItems","setControlledValue","isNodeExpanded","useCallback","itemId","Array","isArray","indexOf","isNodeExpandable","getNode","expandable","toggleNodeExpansion","isExpandedBefore","newExpanded","filter","id","concat","onItemExpansionToggle","expandAllSiblings","node","siblings","getChildrenIds","parentId","diff","child","length","forEach","newlyExpandedItemId","getDefaultValue","defaultExpandedItems","DEFAULT_EXPANDED_NODES","getDefaultizedParams"],"sources":["/Users/xander/node_modules/@mui/x-tree-view/internals/plugins/useTreeViewExpansion/useTreeViewExpansion.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { populateInstance } from '../../useTreeView/useTreeView.utils';\nexport const useTreeViewExpansion = ({\n  instance,\n  params,\n  models\n}) => {\n  const setExpandedItems = (event, value) => {\n    params.onExpandedItemsChange?.(event, value);\n    models.expandedItems.setControlledValue(value);\n  };\n  const isNodeExpanded = React.useCallback(itemId => {\n    return Array.isArray(models.expandedItems.value) ? models.expandedItems.value.indexOf(itemId) !== -1 : false;\n  }, [models.expandedItems.value]);\n  const isNodeExpandable = React.useCallback(itemId => !!instance.getNode(itemId)?.expandable, [instance]);\n  const toggleNodeExpansion = useEventCallback((event, itemId) => {\n    if (itemId == null) {\n      return;\n    }\n    const isExpandedBefore = models.expandedItems.value.indexOf(itemId) !== -1;\n    let newExpanded;\n    if (isExpandedBefore) {\n      newExpanded = models.expandedItems.value.filter(id => id !== itemId);\n    } else {\n      newExpanded = [itemId].concat(models.expandedItems.value);\n    }\n    if (params.onItemExpansionToggle) {\n      params.onItemExpansionToggle(event, itemId, !isExpandedBefore);\n    }\n    setExpandedItems(event, newExpanded);\n  });\n  const expandAllSiblings = (event, itemId) => {\n    const node = instance.getNode(itemId);\n    const siblings = instance.getChildrenIds(node.parentId);\n    const diff = siblings.filter(child => instance.isNodeExpandable(child) && !instance.isNodeExpanded(child));\n    const newExpanded = models.expandedItems.value.concat(diff);\n    if (diff.length > 0) {\n      if (params.onItemExpansionToggle) {\n        diff.forEach(newlyExpandedItemId => {\n          params.onItemExpansionToggle(event, newlyExpandedItemId, true);\n        });\n      }\n      setExpandedItems(event, newExpanded);\n    }\n  };\n  populateInstance(instance, {\n    isNodeExpanded,\n    isNodeExpandable,\n    toggleNodeExpansion,\n    expandAllSiblings\n  });\n};\nuseTreeViewExpansion.models = {\n  expandedItems: {\n    getDefaultValue: params => params.defaultExpandedItems\n  }\n};\nconst DEFAULT_EXPANDED_NODES = [];\nuseTreeViewExpansion.getDefaultizedParams = params => _extends({}, params, {\n  defaultExpandedItems: params.defaultExpandedItems ?? DEFAULT_EXPANDED_NODES\n});\nuseTreeViewExpansion.params = {\n  expandedItems: true,\n  defaultExpandedItems: true,\n  onExpandedItemsChange: true,\n  onItemExpansionToggle: true\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}