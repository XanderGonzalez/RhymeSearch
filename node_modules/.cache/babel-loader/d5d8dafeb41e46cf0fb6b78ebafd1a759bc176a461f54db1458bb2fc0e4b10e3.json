{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport useForkRef from '@mui/utils/useForkRef';\nimport { populateInstance } from '../../useTreeView/useTreeView.utils';\nimport { publishTreeViewEvent } from '../../utils/publishTreeViewEvent';\nimport { useTreeViewContext } from '../../TreeViewProvider/useTreeViewContext';\nimport { DescendantProvider, useDescendant } from '../../TreeViewProvider/DescendantProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const useTreeViewJSXNodes = ({\n  instance,\n  setState\n}) => {\n  const insertJSXNode = useEventCallback(node => {\n    setState(prevState => {\n      if (prevState.nodes.nodeMap[node.id] != null) {\n        throw new Error(['MUI X: The Tree View component requires all items to have a unique `id` property.', 'Alternatively, you can use the `getItemId` prop to specify a custom id for each item.', `Tow items were provided with the same id in the \\`items\\` prop: \"${node.id}\"`].join('\\n'));\n      }\n      return _extends({}, prevState, {\n        nodes: _extends({}, prevState.nodes, {\n          nodeMap: _extends({}, prevState.nodes.nodeMap, {\n            [node.id]: node\n          }),\n          // For `SimpleTreeView`, we don't have a proper `item` object, so we create a very basic one.\n          itemMap: _extends({}, prevState.nodes.itemMap, {\n            [node.id]: {\n              id: node.id,\n              label: node.label\n            }\n          })\n        })\n      });\n    });\n  });\n  const removeJSXNode = useEventCallback(itemId => {\n    setState(prevState => {\n      const newNodeMap = _extends({}, prevState.nodes.nodeMap);\n      const newItemMap = _extends({}, prevState.nodes.itemMap);\n      delete newNodeMap[itemId];\n      delete newItemMap[itemId];\n      return _extends({}, prevState, {\n        nodes: _extends({}, prevState.nodes, {\n          nodeMap: newNodeMap,\n          itemMap: newItemMap\n        })\n      });\n    });\n    publishTreeViewEvent(instance, 'removeNode', {\n      id: itemId\n    });\n  });\n  const mapFirstCharFromJSX = useEventCallback((itemId, firstChar) => {\n    instance.updateFirstCharMap(firstCharMap => {\n      firstCharMap[itemId] = firstChar;\n      return firstCharMap;\n    });\n    return () => {\n      instance.updateFirstCharMap(firstCharMap => {\n        const newMap = _extends({}, firstCharMap);\n        delete newMap[itemId];\n        return newMap;\n      });\n    };\n  });\n  populateInstance(instance, {\n    insertJSXNode,\n    removeJSXNode,\n    mapFirstCharFromJSX\n  });\n};\nconst useTreeViewJSXNodesItemPlugin = ({\n  props,\n  rootRef,\n  contentRef\n}) => {\n  const {\n    children,\n    disabled = false,\n    label,\n    itemId,\n    id\n  } = props;\n  const {\n    instance\n  } = useTreeViewContext();\n  const isExpandable = reactChildren => {\n    if (Array.isArray(reactChildren)) {\n      return reactChildren.length > 0 && reactChildren.some(isExpandable);\n    }\n    return Boolean(reactChildren);\n  };\n  const expandable = isExpandable(children);\n  const [treeItemElement, setTreeItemElement] = React.useState(null);\n  const pluginContentRef = React.useRef(null);\n  const handleRootRef = useForkRef(setTreeItemElement, rootRef);\n  const handleContentRef = useForkRef(pluginContentRef, contentRef);\n  const descendant = React.useMemo(() => ({\n    element: treeItemElement,\n    id: itemId\n  }), [itemId, treeItemElement]);\n  const {\n    index,\n    parentId\n  } = useDescendant(descendant);\n  React.useEffect(() => {\n    // On the first render a node's index will be -1. We want to wait for the real index.\n    if (index !== -1) {\n      instance.insertJSXNode({\n        id: itemId,\n        idAttribute: id,\n        index,\n        parentId,\n        expandable,\n        disabled\n      });\n      return () => instance.removeJSXNode(itemId);\n    }\n    return undefined;\n  }, [instance, parentId, index, itemId, expandable, disabled, id]);\n  React.useEffect(() => {\n    if (label) {\n      return instance.mapFirstCharFromJSX(itemId, (pluginContentRef.current?.textContent ?? '').substring(0, 1).toLowerCase());\n    }\n    return undefined;\n  }, [instance, itemId, label]);\n  return {\n    contentRef: handleContentRef,\n    rootRef: handleRootRef\n  };\n};\nuseTreeViewJSXNodes.itemPlugin = useTreeViewJSXNodesItemPlugin;\nuseTreeViewJSXNodes.wrapItem = ({\n  children,\n  itemId\n}) => /*#__PURE__*/_jsx(DescendantProvider, {\n  id: itemId,\n  children: children\n});\nuseTreeViewJSXNodes.params = {};","map":{"version":3,"names":["_extends","React","useEventCallback","useForkRef","populateInstance","publishTreeViewEvent","useTreeViewContext","DescendantProvider","useDescendant","jsx","_jsx","useTreeViewJSXNodes","instance","setState","insertJSXNode","node","prevState","nodes","nodeMap","id","Error","join","itemMap","label","removeJSXNode","itemId","newNodeMap","newItemMap","mapFirstCharFromJSX","firstChar","updateFirstCharMap","firstCharMap","newMap","useTreeViewJSXNodesItemPlugin","props","rootRef","contentRef","children","disabled","isExpandable","reactChildren","Array","isArray","length","some","Boolean","expandable","treeItemElement","setTreeItemElement","useState","pluginContentRef","useRef","handleRootRef","handleContentRef","descendant","useMemo","element","index","parentId","useEffect","idAttribute","undefined","current","textContent","substring","toLowerCase","itemPlugin","wrapItem","params"],"sources":["/Users/xander/node_modules/@mui/x-tree-view/internals/plugins/useTreeViewJSXNodes/useTreeViewJSXNodes.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport useForkRef from '@mui/utils/useForkRef';\nimport { populateInstance } from '../../useTreeView/useTreeView.utils';\nimport { publishTreeViewEvent } from '../../utils/publishTreeViewEvent';\nimport { useTreeViewContext } from '../../TreeViewProvider/useTreeViewContext';\nimport { DescendantProvider, useDescendant } from '../../TreeViewProvider/DescendantProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const useTreeViewJSXNodes = ({\n  instance,\n  setState\n}) => {\n  const insertJSXNode = useEventCallback(node => {\n    setState(prevState => {\n      if (prevState.nodes.nodeMap[node.id] != null) {\n        throw new Error(['MUI X: The Tree View component requires all items to have a unique `id` property.', 'Alternatively, you can use the `getItemId` prop to specify a custom id for each item.', `Tow items were provided with the same id in the \\`items\\` prop: \"${node.id}\"`].join('\\n'));\n      }\n      return _extends({}, prevState, {\n        nodes: _extends({}, prevState.nodes, {\n          nodeMap: _extends({}, prevState.nodes.nodeMap, {\n            [node.id]: node\n          }),\n          // For `SimpleTreeView`, we don't have a proper `item` object, so we create a very basic one.\n          itemMap: _extends({}, prevState.nodes.itemMap, {\n            [node.id]: {\n              id: node.id,\n              label: node.label\n            }\n          })\n        })\n      });\n    });\n  });\n  const removeJSXNode = useEventCallback(itemId => {\n    setState(prevState => {\n      const newNodeMap = _extends({}, prevState.nodes.nodeMap);\n      const newItemMap = _extends({}, prevState.nodes.itemMap);\n      delete newNodeMap[itemId];\n      delete newItemMap[itemId];\n      return _extends({}, prevState, {\n        nodes: _extends({}, prevState.nodes, {\n          nodeMap: newNodeMap,\n          itemMap: newItemMap\n        })\n      });\n    });\n    publishTreeViewEvent(instance, 'removeNode', {\n      id: itemId\n    });\n  });\n  const mapFirstCharFromJSX = useEventCallback((itemId, firstChar) => {\n    instance.updateFirstCharMap(firstCharMap => {\n      firstCharMap[itemId] = firstChar;\n      return firstCharMap;\n    });\n    return () => {\n      instance.updateFirstCharMap(firstCharMap => {\n        const newMap = _extends({}, firstCharMap);\n        delete newMap[itemId];\n        return newMap;\n      });\n    };\n  });\n  populateInstance(instance, {\n    insertJSXNode,\n    removeJSXNode,\n    mapFirstCharFromJSX\n  });\n};\nconst useTreeViewJSXNodesItemPlugin = ({\n  props,\n  rootRef,\n  contentRef\n}) => {\n  const {\n    children,\n    disabled = false,\n    label,\n    itemId,\n    id\n  } = props;\n  const {\n    instance\n  } = useTreeViewContext();\n  const isExpandable = reactChildren => {\n    if (Array.isArray(reactChildren)) {\n      return reactChildren.length > 0 && reactChildren.some(isExpandable);\n    }\n    return Boolean(reactChildren);\n  };\n  const expandable = isExpandable(children);\n  const [treeItemElement, setTreeItemElement] = React.useState(null);\n  const pluginContentRef = React.useRef(null);\n  const handleRootRef = useForkRef(setTreeItemElement, rootRef);\n  const handleContentRef = useForkRef(pluginContentRef, contentRef);\n  const descendant = React.useMemo(() => ({\n    element: treeItemElement,\n    id: itemId\n  }), [itemId, treeItemElement]);\n  const {\n    index,\n    parentId\n  } = useDescendant(descendant);\n  React.useEffect(() => {\n    // On the first render a node's index will be -1. We want to wait for the real index.\n    if (index !== -1) {\n      instance.insertJSXNode({\n        id: itemId,\n        idAttribute: id,\n        index,\n        parentId,\n        expandable,\n        disabled\n      });\n      return () => instance.removeJSXNode(itemId);\n    }\n    return undefined;\n  }, [instance, parentId, index, itemId, expandable, disabled, id]);\n  React.useEffect(() => {\n    if (label) {\n      return instance.mapFirstCharFromJSX(itemId, (pluginContentRef.current?.textContent ?? '').substring(0, 1).toLowerCase());\n    }\n    return undefined;\n  }, [instance, itemId, label]);\n  return {\n    contentRef: handleContentRef,\n    rootRef: handleRootRef\n  };\n};\nuseTreeViewJSXNodes.itemPlugin = useTreeViewJSXNodesItemPlugin;\nuseTreeViewJSXNodes.wrapItem = ({\n  children,\n  itemId\n}) => /*#__PURE__*/_jsx(DescendantProvider, {\n  id: itemId,\n  children: children\n});\nuseTreeViewJSXNodes.params = {};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}