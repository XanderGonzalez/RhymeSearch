{"ast":null,"code":"import * as React from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { getFirstNode, getLastNode, getNextNode, getPreviousNode, populateInstance } from '../../useTreeView/useTreeView.utils';\nfunction isPrintableCharacter(string) {\n  return !!string && string.length === 1 && !!string.match(/\\S/);\n}\nfunction findNextFirstChar(firstChars, startIndex, char) {\n  for (let i = startIndex; i < firstChars.length; i += 1) {\n    if (char === firstChars[i]) {\n      return i;\n    }\n  }\n  return -1;\n}\nexport const useTreeViewKeyboardNavigation = ({\n  instance,\n  params\n}) => {\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const firstCharMap = React.useRef({});\n  const hasFirstCharMapBeenUpdatedImperatively = React.useRef(false);\n  const updateFirstCharMap = useEventCallback(callback => {\n    hasFirstCharMapBeenUpdatedImperatively.current = true;\n    firstCharMap.current = callback(firstCharMap.current);\n  });\n  React.useEffect(() => {\n    if (hasFirstCharMapBeenUpdatedImperatively.current) {\n      return;\n    }\n    const newFirstCharMap = {};\n    const processItem = item => {\n      const getItemId = params.getItemId;\n      const itemId = getItemId ? getItemId(item) : item.id;\n      newFirstCharMap[itemId] = instance.getNode(itemId).label.substring(0, 1).toLowerCase();\n      item.children?.forEach(processItem);\n    };\n    params.items.forEach(processItem);\n    firstCharMap.current = newFirstCharMap;\n  }, [params.items, params.getItemId, instance]);\n  const getFirstMatchingItem = (itemId, firstChar) => {\n    let start;\n    let index;\n    const lowercaseChar = firstChar.toLowerCase();\n    const firstCharIds = [];\n    const firstChars = [];\n    // This really only works since the ids are strings\n    Object.keys(firstCharMap.current).forEach(mapItemId => {\n      const map = instance.getNode(mapItemId);\n      const visible = map.parentId ? instance.isNodeExpanded(map.parentId) : true;\n      const shouldBeSkipped = params.disabledItemsFocusable ? false : instance.isNodeDisabled(mapItemId);\n      if (visible && !shouldBeSkipped) {\n        firstCharIds.push(mapItemId);\n        firstChars.push(firstCharMap.current[mapItemId]);\n      }\n    });\n\n    // Get start index for search based on position of currentItem\n    start = firstCharIds.indexOf(itemId) + 1;\n    if (start >= firstCharIds.length) {\n      start = 0;\n    }\n\n    // Check remaining slots in the menu\n    index = findNextFirstChar(firstChars, start, lowercaseChar);\n\n    // If not found in remaining slots, check from beginning\n    if (index === -1) {\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\n    }\n\n    // If a match was found...\n    if (index > -1) {\n      return firstCharIds[index];\n    }\n    return null;\n  };\n  const canToggleItemSelection = itemId => !params.disableSelection && !instance.isNodeDisabled(itemId);\n  const canToggleItemExpansion = itemId => {\n    return !instance.isNodeDisabled(itemId) && instance.isNodeExpandable(itemId);\n  };\n\n  // ARIA specification: https://www.w3.org/WAI/ARIA/apg/patterns/treeview/#keyboardinteraction\n  const handleItemKeyDown = (event, itemId) => {\n    if (event.defaultMuiPrevented) {\n      return;\n    }\n    if (event.altKey || event.currentTarget !== event.target) {\n      return;\n    }\n    const ctrlPressed = event.ctrlKey || event.metaKey;\n    const key = event.key;\n\n    // eslint-disable-next-line default-case\n    switch (true) {\n      // Select the node when pressing \"Space\"\n      case key === ' ' && canToggleItemSelection(itemId):\n        {\n          event.preventDefault();\n          if (params.multiSelect && event.shiftKey) {\n            instance.selectRange(event, {\n              end: itemId\n            });\n          } else if (params.multiSelect) {\n            instance.selectNode(event, itemId, true);\n          } else {\n            instance.selectNode(event, itemId);\n          }\n          break;\n        }\n\n      // If the focused node has children, we expand it.\n      // If the focused node has no children, we select it.\n      case key === 'Enter':\n        {\n          if (canToggleItemExpansion(itemId)) {\n            instance.toggleNodeExpansion(event, itemId);\n            event.preventDefault();\n          } else if (canToggleItemSelection(itemId)) {\n            if (params.multiSelect) {\n              event.preventDefault();\n              instance.selectNode(event, itemId, true);\n            } else if (!instance.isNodeSelected(itemId)) {\n              instance.selectNode(event, itemId);\n              event.preventDefault();\n            }\n          }\n          break;\n        }\n\n      // Focus the next focusable item\n      case key === 'ArrowDown':\n        {\n          const nextItem = getNextNode(instance, itemId);\n          if (nextItem) {\n            event.preventDefault();\n            instance.focusItem(event, nextItem);\n\n            // Multi select behavior when pressing Shift + ArrowDown\n            // Toggles the selection state of the next item\n            if (params.multiSelect && event.shiftKey && canToggleItemSelection(nextItem)) {\n              instance.selectRange(event, {\n                end: nextItem,\n                current: itemId\n              }, true);\n            }\n          }\n          break;\n        }\n\n      // Focuses the previous focusable item\n      case key === 'ArrowUp':\n        {\n          const previousItem = getPreviousNode(instance, itemId);\n          if (previousItem) {\n            event.preventDefault();\n            instance.focusItem(event, previousItem);\n\n            // Multi select behavior when pressing Shift + ArrowUp\n            // Toggles the selection state of the previous item\n            if (params.multiSelect && event.shiftKey && canToggleItemSelection(previousItem)) {\n              instance.selectRange(event, {\n                end: previousItem,\n                current: itemId\n              }, true);\n            }\n          }\n          break;\n        }\n\n      // If the focused item is expanded, we move the focus to its first child\n      // If the focused item is collapsed and has children, we expand it\n      case key === 'ArrowRight' && !isRTL || key === 'ArrowLeft' && isRTL:\n        {\n          if (instance.isNodeExpanded(itemId)) {\n            const nextNodeId = getNextNode(instance, itemId);\n            if (nextNodeId) {\n              instance.focusItem(event, nextNodeId);\n              event.preventDefault();\n            }\n          } else if (canToggleItemExpansion(itemId)) {\n            instance.toggleNodeExpansion(event, itemId);\n            event.preventDefault();\n          }\n          break;\n        }\n\n      // If the focused item is expanded, we collapse it\n      // If the focused item is collapsed and has a parent, we move the focus to this parent\n      case key === 'ArrowLeft' && !isRTL || key === 'ArrowRight' && isRTL:\n        {\n          if (canToggleItemExpansion(itemId) && instance.isNodeExpanded(itemId)) {\n            instance.toggleNodeExpansion(event, itemId);\n            event.preventDefault();\n          } else {\n            const parent = instance.getNode(itemId).parentId;\n            if (parent) {\n              instance.focusItem(event, parent);\n              event.preventDefault();\n            }\n          }\n          break;\n        }\n\n      // Focuses the first node in the tree\n      case key === 'Home':\n        {\n          instance.focusItem(event, getFirstNode(instance));\n\n          // Multi select behavior when pressing Ctrl + Shift + Home\n          // Selects the focused node and all nodes up to the first node.\n          if (canToggleItemSelection(itemId) && params.multiSelect && ctrlPressed && event.shiftKey) {\n            instance.rangeSelectToFirst(event, itemId);\n          }\n          event.preventDefault();\n          break;\n        }\n\n      // Focuses the last item in the tree\n      case key === 'End':\n        {\n          instance.focusItem(event, getLastNode(instance));\n\n          // Multi select behavior when pressing Ctrl + Shirt + End\n          // Selects the focused item and all the items down to the last item.\n          if (canToggleItemSelection(itemId) && params.multiSelect && ctrlPressed && event.shiftKey) {\n            instance.rangeSelectToLast(event, itemId);\n          }\n          event.preventDefault();\n          break;\n        }\n\n      // Expand all siblings that are at the same level as the focused item\n      case key === '*':\n        {\n          instance.expandAllSiblings(event, itemId);\n          event.preventDefault();\n          break;\n        }\n\n      // Multi select behavior when pressing Ctrl + a\n      // Selects all the nodes\n      case key === 'a' && ctrlPressed && params.multiSelect && !params.disableSelection:\n        {\n          instance.selectRange(event, {\n            start: getFirstNode(instance),\n            end: getLastNode(instance)\n          });\n          event.preventDefault();\n          break;\n        }\n\n      // Type-ahead\n      // TODO: Support typing multiple characters\n      case !ctrlPressed && !event.shiftKey && isPrintableCharacter(key):\n        {\n          const matchingNode = getFirstMatchingItem(itemId, key);\n          if (matchingNode != null) {\n            instance.focusItem(event, matchingNode);\n            event.preventDefault();\n          }\n          break;\n        }\n    }\n  };\n  populateInstance(instance, {\n    updateFirstCharMap,\n    handleItemKeyDown\n  });\n};\nuseTreeViewKeyboardNavigation.params = {};","map":{"version":3,"names":["React","useTheme","useEventCallback","getFirstNode","getLastNode","getNextNode","getPreviousNode","populateInstance","isPrintableCharacter","string","length","match","findNextFirstChar","firstChars","startIndex","char","i","useTreeViewKeyboardNavigation","instance","params","theme","isRTL","direction","firstCharMap","useRef","hasFirstCharMapBeenUpdatedImperatively","updateFirstCharMap","callback","current","useEffect","newFirstCharMap","processItem","item","getItemId","itemId","id","getNode","label","substring","toLowerCase","children","forEach","items","getFirstMatchingItem","firstChar","start","index","lowercaseChar","firstCharIds","Object","keys","mapItemId","map","visible","parentId","isNodeExpanded","shouldBeSkipped","disabledItemsFocusable","isNodeDisabled","push","indexOf","canToggleItemSelection","disableSelection","canToggleItemExpansion","isNodeExpandable","handleItemKeyDown","event","defaultMuiPrevented","altKey","currentTarget","target","ctrlPressed","ctrlKey","metaKey","key","preventDefault","multiSelect","shiftKey","selectRange","end","selectNode","toggleNodeExpansion","isNodeSelected","nextItem","focusItem","previousItem","nextNodeId","parent","rangeSelectToFirst","rangeSelectToLast","expandAllSiblings","matchingNode"],"sources":["/Users/xander/node_modules/@mui/x-tree-view/internals/plugins/useTreeViewKeyboardNavigation/useTreeViewKeyboardNavigation.js"],"sourcesContent":["import * as React from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { getFirstNode, getLastNode, getNextNode, getPreviousNode, populateInstance } from '../../useTreeView/useTreeView.utils';\nfunction isPrintableCharacter(string) {\n  return !!string && string.length === 1 && !!string.match(/\\S/);\n}\nfunction findNextFirstChar(firstChars, startIndex, char) {\n  for (let i = startIndex; i < firstChars.length; i += 1) {\n    if (char === firstChars[i]) {\n      return i;\n    }\n  }\n  return -1;\n}\nexport const useTreeViewKeyboardNavigation = ({\n  instance,\n  params\n}) => {\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const firstCharMap = React.useRef({});\n  const hasFirstCharMapBeenUpdatedImperatively = React.useRef(false);\n  const updateFirstCharMap = useEventCallback(callback => {\n    hasFirstCharMapBeenUpdatedImperatively.current = true;\n    firstCharMap.current = callback(firstCharMap.current);\n  });\n  React.useEffect(() => {\n    if (hasFirstCharMapBeenUpdatedImperatively.current) {\n      return;\n    }\n    const newFirstCharMap = {};\n    const processItem = item => {\n      const getItemId = params.getItemId;\n      const itemId = getItemId ? getItemId(item) : item.id;\n      newFirstCharMap[itemId] = instance.getNode(itemId).label.substring(0, 1).toLowerCase();\n      item.children?.forEach(processItem);\n    };\n    params.items.forEach(processItem);\n    firstCharMap.current = newFirstCharMap;\n  }, [params.items, params.getItemId, instance]);\n  const getFirstMatchingItem = (itemId, firstChar) => {\n    let start;\n    let index;\n    const lowercaseChar = firstChar.toLowerCase();\n    const firstCharIds = [];\n    const firstChars = [];\n    // This really only works since the ids are strings\n    Object.keys(firstCharMap.current).forEach(mapItemId => {\n      const map = instance.getNode(mapItemId);\n      const visible = map.parentId ? instance.isNodeExpanded(map.parentId) : true;\n      const shouldBeSkipped = params.disabledItemsFocusable ? false : instance.isNodeDisabled(mapItemId);\n      if (visible && !shouldBeSkipped) {\n        firstCharIds.push(mapItemId);\n        firstChars.push(firstCharMap.current[mapItemId]);\n      }\n    });\n\n    // Get start index for search based on position of currentItem\n    start = firstCharIds.indexOf(itemId) + 1;\n    if (start >= firstCharIds.length) {\n      start = 0;\n    }\n\n    // Check remaining slots in the menu\n    index = findNextFirstChar(firstChars, start, lowercaseChar);\n\n    // If not found in remaining slots, check from beginning\n    if (index === -1) {\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\n    }\n\n    // If a match was found...\n    if (index > -1) {\n      return firstCharIds[index];\n    }\n    return null;\n  };\n  const canToggleItemSelection = itemId => !params.disableSelection && !instance.isNodeDisabled(itemId);\n  const canToggleItemExpansion = itemId => {\n    return !instance.isNodeDisabled(itemId) && instance.isNodeExpandable(itemId);\n  };\n\n  // ARIA specification: https://www.w3.org/WAI/ARIA/apg/patterns/treeview/#keyboardinteraction\n  const handleItemKeyDown = (event, itemId) => {\n    if (event.defaultMuiPrevented) {\n      return;\n    }\n    if (event.altKey || event.currentTarget !== event.target) {\n      return;\n    }\n    const ctrlPressed = event.ctrlKey || event.metaKey;\n    const key = event.key;\n\n    // eslint-disable-next-line default-case\n    switch (true) {\n      // Select the node when pressing \"Space\"\n      case key === ' ' && canToggleItemSelection(itemId):\n        {\n          event.preventDefault();\n          if (params.multiSelect && event.shiftKey) {\n            instance.selectRange(event, {\n              end: itemId\n            });\n          } else if (params.multiSelect) {\n            instance.selectNode(event, itemId, true);\n          } else {\n            instance.selectNode(event, itemId);\n          }\n          break;\n        }\n\n      // If the focused node has children, we expand it.\n      // If the focused node has no children, we select it.\n      case key === 'Enter':\n        {\n          if (canToggleItemExpansion(itemId)) {\n            instance.toggleNodeExpansion(event, itemId);\n            event.preventDefault();\n          } else if (canToggleItemSelection(itemId)) {\n            if (params.multiSelect) {\n              event.preventDefault();\n              instance.selectNode(event, itemId, true);\n            } else if (!instance.isNodeSelected(itemId)) {\n              instance.selectNode(event, itemId);\n              event.preventDefault();\n            }\n          }\n          break;\n        }\n\n      // Focus the next focusable item\n      case key === 'ArrowDown':\n        {\n          const nextItem = getNextNode(instance, itemId);\n          if (nextItem) {\n            event.preventDefault();\n            instance.focusItem(event, nextItem);\n\n            // Multi select behavior when pressing Shift + ArrowDown\n            // Toggles the selection state of the next item\n            if (params.multiSelect && event.shiftKey && canToggleItemSelection(nextItem)) {\n              instance.selectRange(event, {\n                end: nextItem,\n                current: itemId\n              }, true);\n            }\n          }\n          break;\n        }\n\n      // Focuses the previous focusable item\n      case key === 'ArrowUp':\n        {\n          const previousItem = getPreviousNode(instance, itemId);\n          if (previousItem) {\n            event.preventDefault();\n            instance.focusItem(event, previousItem);\n\n            // Multi select behavior when pressing Shift + ArrowUp\n            // Toggles the selection state of the previous item\n            if (params.multiSelect && event.shiftKey && canToggleItemSelection(previousItem)) {\n              instance.selectRange(event, {\n                end: previousItem,\n                current: itemId\n              }, true);\n            }\n          }\n          break;\n        }\n\n      // If the focused item is expanded, we move the focus to its first child\n      // If the focused item is collapsed and has children, we expand it\n      case key === 'ArrowRight' && !isRTL || key === 'ArrowLeft' && isRTL:\n        {\n          if (instance.isNodeExpanded(itemId)) {\n            const nextNodeId = getNextNode(instance, itemId);\n            if (nextNodeId) {\n              instance.focusItem(event, nextNodeId);\n              event.preventDefault();\n            }\n          } else if (canToggleItemExpansion(itemId)) {\n            instance.toggleNodeExpansion(event, itemId);\n            event.preventDefault();\n          }\n          break;\n        }\n\n      // If the focused item is expanded, we collapse it\n      // If the focused item is collapsed and has a parent, we move the focus to this parent\n      case key === 'ArrowLeft' && !isRTL || key === 'ArrowRight' && isRTL:\n        {\n          if (canToggleItemExpansion(itemId) && instance.isNodeExpanded(itemId)) {\n            instance.toggleNodeExpansion(event, itemId);\n            event.preventDefault();\n          } else {\n            const parent = instance.getNode(itemId).parentId;\n            if (parent) {\n              instance.focusItem(event, parent);\n              event.preventDefault();\n            }\n          }\n          break;\n        }\n\n      // Focuses the first node in the tree\n      case key === 'Home':\n        {\n          instance.focusItem(event, getFirstNode(instance));\n\n          // Multi select behavior when pressing Ctrl + Shift + Home\n          // Selects the focused node and all nodes up to the first node.\n          if (canToggleItemSelection(itemId) && params.multiSelect && ctrlPressed && event.shiftKey) {\n            instance.rangeSelectToFirst(event, itemId);\n          }\n          event.preventDefault();\n          break;\n        }\n\n      // Focuses the last item in the tree\n      case key === 'End':\n        {\n          instance.focusItem(event, getLastNode(instance));\n\n          // Multi select behavior when pressing Ctrl + Shirt + End\n          // Selects the focused item and all the items down to the last item.\n          if (canToggleItemSelection(itemId) && params.multiSelect && ctrlPressed && event.shiftKey) {\n            instance.rangeSelectToLast(event, itemId);\n          }\n          event.preventDefault();\n          break;\n        }\n\n      // Expand all siblings that are at the same level as the focused item\n      case key === '*':\n        {\n          instance.expandAllSiblings(event, itemId);\n          event.preventDefault();\n          break;\n        }\n\n      // Multi select behavior when pressing Ctrl + a\n      // Selects all the nodes\n      case key === 'a' && ctrlPressed && params.multiSelect && !params.disableSelection:\n        {\n          instance.selectRange(event, {\n            start: getFirstNode(instance),\n            end: getLastNode(instance)\n          });\n          event.preventDefault();\n          break;\n        }\n\n      // Type-ahead\n      // TODO: Support typing multiple characters\n      case !ctrlPressed && !event.shiftKey && isPrintableCharacter(key):\n        {\n          const matchingNode = getFirstMatchingItem(itemId, key);\n          if (matchingNode != null) {\n            instance.focusItem(event, matchingNode);\n            event.preventDefault();\n          }\n          break;\n        }\n    }\n  };\n  populateInstance(instance, {\n    updateFirstCharMap,\n    handleItemKeyDown\n  });\n};\nuseTreeViewKeyboardNavigation.params = {};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}