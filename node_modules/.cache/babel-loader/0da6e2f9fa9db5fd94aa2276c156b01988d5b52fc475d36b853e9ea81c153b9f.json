{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\n/**\n * Implements the same behavior as `useControlled` but for several models.\n * The controlled models are never stored in the state and the state is only updated if the model is not controlled.\n */\nexport const useTreeViewModels = (plugins, props) => {\n  const modelsRef = React.useRef({});\n  const [modelsState, setModelsState] = React.useState(() => {\n    const initialState = {};\n    plugins.forEach(plugin => {\n      if (plugin.models) {\n        Object.entries(plugin.models).forEach(_ref => {\n          let [modelName, modelInitializer] = _ref;\n          modelsRef.current[modelName] = {\n            isControlled: props[modelName] !== undefined,\n            getDefaultValue: modelInitializer.getDefaultValue\n          };\n          initialState[modelName] = modelInitializer.getDefaultValue(props);\n        });\n      }\n    });\n    return initialState;\n  });\n  const models = Object.fromEntries(Object.entries(modelsRef.current).map(_ref2 => {\n    let [modelName, model] = _ref2;\n    const value = model.isControlled ? props[modelName] : modelsState[modelName];\n    return [modelName, {\n      value,\n      setControlledValue: newValue => {\n        if (!model.isControlled) {\n          setModelsState(prevState => _extends({}, prevState, {\n            [modelName]: newValue\n          }));\n        }\n      }\n    }];\n  }));\n\n  // We know that `modelsRef` do not vary across renders.\n  /* eslint-disable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\n  if (process.env.NODE_ENV !== 'production') {\n    Object.entries(modelsRef.current).forEach(_ref3 => {\n      let [modelName, model] = _ref3;\n      const controlled = props[modelName];\n      const newDefaultValue = model.getDefaultValue(props);\n      React.useEffect(() => {\n        if (model.isControlled !== (controlled !== undefined)) {\n          console.error([\"MUI X: A component is changing the \".concat(model.isControlled ? '' : 'un', \"controlled \").concat(modelName, \" state of TreeView to be \").concat(model.isControlled ? 'un' : '', \"controlled.\"), 'Elements should not switch from uncontrolled to controlled (or vice versa).', \"Decide between using a controlled or uncontrolled \".concat(modelName, \" \") + 'element for the lifetime of the component.', \"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.\", 'More info: https://fb.me/react-controlled-components'].join('\\n'));\n        }\n      }, [controlled]);\n      const {\n        current: defaultValue\n      } = React.useRef(newDefaultValue);\n      React.useEffect(() => {\n        if (!model.isControlled && defaultValue !== newDefaultValue) {\n          console.error([\"MUI X: A component is changing the default \".concat(modelName, \" state of an uncontrolled TreeView after being initialized. \") + \"To suppress this warning opt to use a controlled TreeView.\"].join('\\n'));\n        }\n      }, [JSON.stringify(defaultValue)]);\n    });\n  }\n  /* eslint-enable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\n\n  return models;\n};","map":{"version":3,"names":["_extends","React","useTreeViewModels","plugins","props","modelsRef","useRef","modelsState","setModelsState","useState","initialState","forEach","plugin","models","Object","entries","_ref","modelName","modelInitializer","current","isControlled","undefined","getDefaultValue","fromEntries","map","_ref2","model","value","setControlledValue","newValue","prevState","process","env","NODE_ENV","_ref3","controlled","newDefaultValue","useEffect","console","error","concat","join","defaultValue","JSON","stringify"],"sources":["/Users/xander/node_modules/@mui/x-tree-view/internals/useTreeView/useTreeViewModels.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\n/**\n * Implements the same behavior as `useControlled` but for several models.\n * The controlled models are never stored in the state and the state is only updated if the model is not controlled.\n */\nexport const useTreeViewModels = (plugins, props) => {\n  const modelsRef = React.useRef({});\n  const [modelsState, setModelsState] = React.useState(() => {\n    const initialState = {};\n    plugins.forEach(plugin => {\n      if (plugin.models) {\n        Object.entries(plugin.models).forEach(([modelName, modelInitializer]) => {\n          modelsRef.current[modelName] = {\n            isControlled: props[modelName] !== undefined,\n            getDefaultValue: modelInitializer.getDefaultValue\n          };\n          initialState[modelName] = modelInitializer.getDefaultValue(props);\n        });\n      }\n    });\n    return initialState;\n  });\n  const models = Object.fromEntries(Object.entries(modelsRef.current).map(([modelName, model]) => {\n    const value = model.isControlled ? props[modelName] : modelsState[modelName];\n    return [modelName, {\n      value,\n      setControlledValue: newValue => {\n        if (!model.isControlled) {\n          setModelsState(prevState => _extends({}, prevState, {\n            [modelName]: newValue\n          }));\n        }\n      }\n    }];\n  }));\n\n  // We know that `modelsRef` do not vary across renders.\n  /* eslint-disable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\n  if (process.env.NODE_ENV !== 'production') {\n    Object.entries(modelsRef.current).forEach(([modelName, model]) => {\n      const controlled = props[modelName];\n      const newDefaultValue = model.getDefaultValue(props);\n      React.useEffect(() => {\n        if (model.isControlled !== (controlled !== undefined)) {\n          console.error([`MUI X: A component is changing the ${model.isControlled ? '' : 'un'}controlled ${modelName} state of TreeView to be ${model.isControlled ? 'un' : ''}controlled.`, 'Elements should not switch from uncontrolled to controlled (or vice versa).', `Decide between using a controlled or uncontrolled ${modelName} ` + 'element for the lifetime of the component.', \"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.\", 'More info: https://fb.me/react-controlled-components'].join('\\n'));\n        }\n      }, [controlled]);\n      const {\n        current: defaultValue\n      } = React.useRef(newDefaultValue);\n      React.useEffect(() => {\n        if (!model.isControlled && defaultValue !== newDefaultValue) {\n          console.error([`MUI X: A component is changing the default ${modelName} state of an uncontrolled TreeView after being initialized. ` + `To suppress this warning opt to use a controlled TreeView.`].join('\\n'));\n        }\n      }, [JSON.stringify(defaultValue)]);\n    });\n  }\n  /* eslint-enable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\n\n  return models;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}